<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Camera – Multi Filter Lab</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="app">
    <h1>Camera – Multi Filter Lab</h1>

    <div class="preview">
      <video id="video" playsinline></video>
      <canvas id="canvas"></canvas>
    </div>

    <div class="row">
      <div class="buttons">
        <button id="start">Start Camera</button>
        <button id="stop">Stop Camera</button>
        <button id="capture" class="capture-big"></button>
      </div>
    </div>

    <h2>Stackable filters (can combine)</h2>
    <div class="stack-panel">
      <div class="stack-filter">
        <label>
          <input type="checkbox" id="enableGray" />
          Grayscale
        </label>
        <input type="range" id="grayRange" min="0" max="100" value="100" />
        <span class="value-label" id="grayValue">100%</span>
      </div>

      <div class="stack-filter">
        <label>
          <input type="checkbox" id="enableThreshold" />
          Threshold
        </label>
        <input type="range" id="thRange" min="0" max="255" value="128" />
        <span class="value-label" id="thValue">128</span>
      </div>

      <div class="stack-filter">
        <label>
          <input type="checkbox" id="enablePixel" />
          Pixelate
        </label>
        <input type="range" id="pixelRange" min="2" max="40" value="12" />
        <span class="value-label" id="pixelValue">12</span>
      </div>

      <div class="stack-filter">
        <label>
          <input type="checkbox" id="enableDither" />
          Dithered
        </label>
        <input type="range" id="ditherRange" min="0" max="200" value="100" />
        <span class="value-label" id="ditherValue">100</span>
      </div>

      <div class="stack-filter">
        <label>
          <input type="checkbox" id="enableTexturing" />
          Texturing
        </label>
        <input type="range" id="texRange" min="0" max="100" value="30" />
        <span class="value-label" id="texValue">30</span>
      </div>

      <div class="stack-filter">
        <label>
          <input type="checkbox" id="enableCacheTrail" />
          Cache Trail
        </label>
        <input type="range" id="cacheTrailRange" min="0" max="100" value="50" />
        <span class="value-label" id="cacheTrailValue">50</span>
      </div>

      <div class="stack-filter">
        <label>
          <input type="checkbox" id="enableCacheCentral" />
          Cache Central
        </label>
        <input type="range" id="cacheCentralRange" min="0" max="100" value="50" />
        <span class="value-label" id="cacheCentralValue">50</span>
      </div>

      <div class="stack-filter">
        <label>
          <input type="checkbox" id="enableCacheGrid" />
          Cache Grid
        </label>
        <input type="range" id="cacheGridRange" min="0" max="100" value="50" />
        <span class="value-label" id="cacheGridValue">50</span>
      </div>

      <div class="stack-filter">
        <label>
          <input type="checkbox" id="enableCacheHGrid" />
          Cache Horizontal Grid
        </label>
        <input type="range" id="cacheHGridRange" min="0" max="100" value="50" />
        <span class="value-label" id="cacheHGridValue">50</span>
      </div>
    </div>

    <h2>Mode filter (one active)</h2>
    <div class="stack-panel" id="modePanel">
      <!-- Mode selector -->
      <div class="stack-filter">
        <label for="modeSelect">Mode</label>
        <select id="modeSelect">
          <option value="none">None</option>
          <option value="ascii">ASCII</option>
          <option value="pixelSort">Pixel Sorting</option>
          <option value="platane">Platane (Mirror)</option>
          <option value="recursive">Recursive</option>
          <option value="recursiveLateral">Recursive Lateral</option>
        </select>
      </div>

      <!-- Per-mode controls: only one visible at a time -->

      <div class="stack-filter mode-config" data-mode="ascii">
        <label>ASCII cell size</label>
        <input type="range" id="asciiRange" min="6" max="20" value="10" />
        <span class="value-label" id="asciiValue">10</span>
      </div>

      <div class="stack-filter mode-config" data-mode="pixelSort">
        <label>PixelSort segment</label>
        <input type="range" id="pixelSortRange" min="5" max="100" value="40" />
        <span class="value-label" id="pixelSortValue">40</span>
      </div>

      <div class="stack-filter mode-config" data-mode="platane">
        <label>Platane strength</label>
        <input type="range" id="plataneRange" min="0" max="100" value="60" />
        <span class="value-label" id="plataneValue">60</span>
      </div>

      <div class="stack-filter mode-config" data-mode="recursive">
        <label>Recursive depth</label>
        <input type="range" id="recursiveRange" min="1" max="6" value="3" />
        <span class="value-label" id="recursiveValue">3</span>
      </div>

      <div class="stack-filter mode-config" data-mode="recursiveLateral">
        <label>Recursive lateral depth</label>
        <input type="range" id="recursiveLatRange" min="1" max="6" value="3" />
        <span class="value-label" id="recursiveLatValue">3</span>
      </div>
    </div>
  </div>

  <!-- Save Image Popup -->
  <div class="modal-bg" id="modalBG">
    <div class="modal">
      <img id="snapshot" alt="Snapshot preview" />
      <p id="imageSizeLabel">Image Size: --</p>
      <p>Do you want to save this image?</p>
      <div class="modal-buttons">
        <button id="saveYes">Yes</button>
        <button id="saveNo">No</button>
      </div>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>
